<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple Calculator</title>
  <style>
    :root{
      --bg: #f3f4f6;
      --panel: #1f2937;
      --btn: #e5e7eb;
      --accent: #10b981;
      --op: #f59e0b;
      --text: #111827;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, #eef2ff 0%, #f3f4f6 100%);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      color:var(--text);
    }
    .calculator{
      width:320px;
      max-width:100%;
      background:var(--panel);
      border-radius:12px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.3);
      padding:18px;
      color: white;
    }
    .display{
      height:72px;
      background:rgba(255,255,255,0.06);
      border-radius:8px;
      padding:12px;
      display:flex;
      flex-direction:column;
      justify-content:center;
      align-items:flex-end;
      gap:4px;
      overflow:hidden;
      word-break:break-all;
    }
    .previous{
      font-size:13px;
      opacity:0.7;
    }
    .current{
      font-size:26px;
      font-weight:600;
    }
    .buttons{
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:10px;
      margin-top:14px;
    }
    button{
      height:56px;
      border-radius:8px;
      border:0;
      background:var(--btn);
      font-size:18px;
      font-weight:600;
      cursor:pointer;
      transition:transform .08s ease, box-shadow .08s ease;
      box-shadow: 0 4px 8px rgba(0,0,0,0.15);
      user-select:none;
    }
    button:active{ transform: translateY(1px) }
    .btn-operator{ background: #f97316; color:white; }
    .btn-equals{ grid-column: span 2; background: var(--accent); color:white; }
    .btn-clear{ background:#ef4444; color:white; }
    .btn-wide{ grid-column: span 2; }
    /* smaller buttons on small screens */
    @media (max-width:360px){
      .calculator{ padding:12px }
      .display{ height:64px; padding:8px }
      button{ height:50px; font-size:16px }
    }
  </style>
</head>
<body>
  <div class="calculator" role="application" aria-label="Simple calculator">
    <div class="display" aria-live="polite">
      <div class="previous" id="previous"></div>
      <div class="current" id="current">0</div>
    </div>

    <div class="buttons" role="group" aria-label="Calculator buttons">
      <button class="btn-clear" data-action="clear">C</button>
      <button data-action="back">⌫</button>
      <button data-action="percent">%</button>
      <button class="btn-operator" data-action="/">÷</button>

      <button data-number="7">7</button>
      <button data-number="8">8</button>
      <button data-number="9">9</button>
      <button class="btn-operator" data-action="*">×</button>

      <button data-number="4">4</button>
      <button data-number="5">5</button>
      <button data-number="6">6</button>
      <button class="btn-operator" data-action="-">−</button>

      <button data-number="1">1</button>
      <button data-number="2">2</button>
      <button data-number="3">3</button>
      <button class="btn-operator" data-action="+">+</button>

      <button data-number="0" class="btn-wide">0</button>
      <button data-number=".">.</button>
      <button class="btn-equals" data-action="=">=</button>
    </div>
  </div>

  <script>
    // Basic calculator logic
    (function(){
      const previousEl = document.getElementById('previous');
      const currentEl  = document.getElementById('current');
      let current = '0';
      let previous = '';
      let operator = null;
      let overwrite = false;

      function updateDisplay(){
        previousEl.textContent = previous ? `${previous} ${operator || ''}`.trim() : '';
        currentEl.textContent = current;
      }

      function appendNumber(n){
        if (overwrite) {
          current = n === '.' ? '0.' : n;
          overwrite = false;
          return;
        }
        if (n === '.' && current.includes('.')) return;
        if (current === '0' && n !== '.') current = n;
        else current = current + n;
      }

      function chooseOperator(op){
        if (operator && !overwrite) {
          compute();
        }
        operator = op;
        previous = current;
        overwrite = true;
      }

      function clearAll(){
        current = '0';
        previous = '';
        operator = null;
        overwrite = false;
      }

      function backspace(){
        if (overwrite || current.length === 1) {
          current = '0';
          overwrite = false;
          return;
        }
        current = current.slice(0, -1);
      }

      function percent(){
        // convert current to percent
        let val = parseFloat(current);
        if (isNaN(val)) return;
        val = val / 100;
        current = String(val);
        overwrite = true;
      }

      function compute(){
        if (!operator || previous === '') return;
        const a = parseFloat(previous);
        const b = parseFloat(current);
        if (isNaN(a) || isNaN(b)) return;
        let result;
        switch(operator){
          case '+': result = a + b; break;
          case '-': result = a - b; break;
          case '*': result = a * b; break;
          case '/':
            if (b === 0) { result = 'Error'; break; }
            result = a / b; break;
          default: return;
        }
        // limit floating precision sensibly
        if (typeof result === 'number') {
          // round to 12 significant digits to avoid long floats
          result = parseFloat(result.toPrecision(12));
          // remove trailing .0
          result = (Math.floor(result) === result) ? String(Math.floor(result)) : String(result);
        } else {
          result = String(result);
        }
        current = result;
        previous = '';
        operator = null;
        overwrite = true;
      }

      // handle click events
      document.querySelector('.buttons').addEventListener('click', (e)=>{
        const btn = e.target.closest('button');
        if (!btn) return;
        const num = btn.dataset.number;
        const action = btn.dataset.action;

        if (num !== undefined) {
          appendNumber(num);
          updateDisplay();
          return;
        }
        if (action) {
          if (action === 'clear') clearAll();
          else if (action === 'back') backspace();
          else if (action === '%') percent();
          else if (action === '=') compute();
          else if (['+','-','*','/'].includes(action)) chooseOperator(action);
          updateDisplay();
        }
      });

      // keyboard support
      window.addEventListener('keydown', (e)=>{
        if ((e.key >= '0' && e.key <= '9') || e.key === '.') {
          appendNumber(e.key);
          updateDisplay();
          e.preventDefault();
          return;
        }
        if (e.key === 'Enter' || e.key === '=') {
          compute(); updateDisplay(); e.preventDefault(); return;
        }
        if (e.key === 'Backspace') { backspace(); updateDisplay(); e.preventDefault(); return; }
        if (e.key === 'Escape') { clearAll(); updateDisplay(); e.preventDefault(); return; }
        if (e.key === '%') { percent(); updateDisplay(); e.preventDefault(); return; }
        // operators
        if (['+','-','*','/'].includes(e.key)) {
          chooseOperator(e.key); updateDisplay(); e.preventDefault(); return;
        }
      });

      // initialize
      updateDisplay();
    })();
  </script>
</body>
</html>